<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Afnan Baig - Full Stack Developer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body {
      background-image: url("https://assets.codepen.io/1502334/98.jpg");
      background-color: #c0c0c0;
      font-family: "VT323", monospace;
      color: #000000;
      padding-bottom: 40px;
      overflow-x: hidden;
      cursor: url('https://win98icons.alexmeub.com/icons/cur/normal.cur'), auto;
    }

    body.loading {
      cursor: url('https://win98icons.alexmeub.com/icons/cur/busy.cur'), wait;
    }

    .ui-panel {
      background-color: #c0c0c0;
      border-top: 2px solid #ffffff;
      border-left: 2px solid #ffffff;
      border-right: 2px solid #000000;
      border-bottom: 2px solid #000000;
      box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .title-bar {
      background: linear-gradient(to right, #000080, #1084d0);
      color: #ffffff;
      padding: 4px 8px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: "Arial", sans-serif;
      font-size: 14px;
      user-select: none;
    }

    .frozen .title-bar {
      background: linear-gradient(to right, #808080, #c0c0c0);
      color: #a0a0a0;
    }

    .window-controls {
      display: flex;
    }

    .window-control {
      width: 20px;
      height: 20px;
      background-color: #c0c0c0;
      border-top: 1px solid #ffffff;
      border-left: 1px solid #ffffff;
      border-right: 1px solid #000000;
      border-bottom: 1px solid #000000;
      margin-left: 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
    }

    .retro-button {
      background-color: #c0c0c0;
      border: 2px outset #c0c0c0;
      padding: 8px 16px;
      font-family: "VT323", monospace;
      font-size: 20px;
      cursor: pointer;
      transition: all 0.1s ease-in-out;
    }

    .retro-button:active {
      border-style: inset;
    }

    .blinking-bsod-cursor {
      animation: blink-bsod 1s step-end infinite;
    }

    @keyframes blink-bsod {
      50% {
        color: transparent;
      }
    }

    .blinking-text-cursor {
      animation: blink-text 1s step-end infinite;
    }

    @keyframes blink-text {
      50% {
        border-right-color: transparent;
      }
    }

    .taskbar-icon {
      padding: 2px;
      border: 1px solid transparent;
      cursor: pointer;
    }

    .taskbar-icon:hover {
      background-color: #dfdfdf;
      border: 1px dotted #000000;
    }

    #desktop-icons {
      position: absolute;
      top: 1rem;
      left: 1rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .desktop-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 80px;
      cursor: pointer;
      text-align: center;
    }

    .desktop-icon span {
      color: white;
      text-shadow: 1px 1px 2px black;
      padding: 2px 4px;
    }

    .desktop-icon:hover span {
      background-color: #000080;
    }

    @media screen and (max-width: 650px) {
      body {
        background-image: url("https://www.transparenttextures.com/patterns/az-subtle.png");
      }

      #desktop-icons {
        flex-direction: row;
      }

      #desktop-warn {
        display: none;
      }

      #main-window {
        transform: translateY(25px);
      }
    }

    /* To change bg image */
    body.bg-cover {
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
    }

    .modal-content ul {
      list-style-type: disc;
      margin-left: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .modal-content li {
      margin-bottom: 0.5rem;
    }
    
    .modal-content strong {
      font-weight: bold;
    }

    /* New styles for advanced features */
    .marquee {
      white-space: nowrap;
      overflow: hidden;
      box-sizing: border-box;
      background: #000080;
      color: white;
      padding: 4px;
      position: fixed;
      bottom: 40px;
      width: 100%;
      left: 0;
      z-index: 20;
    }
    
    .marquee p {
      display: inline-block;
      padding-left: 100%;
      animation: marquee 20s linear infinite;
      font-family: "Arial", sans-serif;
      font-size: 14px;
    }
    
    @keyframes marquee {
      0%   { transform: translate(0, 0); }
      100% { transform: translate(-100%, 0); }
    }
    
    .desktop-icon.selected span {
      background-color: #000080;
    }
    
    .window-minimized {
      display: none;
    }
    
    .window-maximized {
      width: 100% !important;
      height: calc(100% - 40px) !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      z-index: 25 !important;
      margin: 0 !important;
    }
    
    .window-draggable {
      cursor: move;
    }
    
    .desktop-context-menu {
      position: absolute;
      z-index: 100;
    }
    
    .pixel-art {
      image-rendering: pixelated;
    }
    
    .typing-animation::after {
      content: "|";
      animation: blink 1s step-end infinite;
    }
    
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }
    
    .taskbar-window-button {
      padding: 2px 8px;
      margin: 0 2px;
      background-color: #c0c0c0;
      border: 1px outset #c0c0c0;
      font-family: "Arial", sans-serif;
      font-size: 12px;
      max-width: 160px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .taskbar-window-button.active {
      border-style: inset;
      background-color: #dfdfdf;
    }
    
    .rain-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }
    
    .rain-drop {
      position: absolute;
      width: 2px;
      height: 20px;
      background: linear-gradient(to bottom, transparent, #00ffff);
      opacity: 0.6;
      animation: rain-fall linear infinite;
    }
    
    @keyframes rain-fall {
      to {
        transform: translateY(100vh);
      }
    }
    
    .matrix-code {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      background: rgba(0, 0, 0, 0.9);
      opacity: 0;
      transition: opacity 1s;
    }
    
    .code-char {
      position: absolute;
      color: #00ff00;
      font-family: "Courier New", monospace;
      animation: code-fall linear infinite;
    }
    
    @keyframes code-fall {
      to {
        transform: translateY(100vh);
      }
    }
    
    .desktop-grid {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -2;
      background-image: 
        linear-gradient(to right, rgba(0, 0, 255, 0.1) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(0, 0, 255, 0.1) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    
    .easter-egg-trigger {
      position: fixed;
      width: 10px;
      height: 10px;
      background: transparent;
      z-index: 1000;
    }
    
    .trash-bin {
      position: fixed;
      bottom: 50px;
      right: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .trash-bin img {
      width: 48px;
      height: 48px;
    }
    
    .trash-bin span {
      color: white;
      text-shadow: 1px 1px 2px black;
    }
    
    .window-content {
      transition: all 0.3s ease;
    }
    
    .window-shake {
      animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
    }
    
    @keyframes shake {
      10%, 90% { transform: translateX(-1px); }
      20%, 80% { transform: translateX(2px); }
      30%, 50%, 70% { transform: translateX(-3px); }
      40%, 60% { transform: translateX(3px); }
    }
    
    .desktop-particle {
      position: fixed;
      border-radius: 50%;
      pointer-events: none;
      z-index: -1;
    }
  </style>
</head>
<body class="min-h-screen w-full flex flex-col items-center justify-center p-4 text-xl">
  <!-- Matrix Code Rain (Hidden Initially) -->
  <div id="matrix-code" class="matrix-code"></div>
  
  <!-- Desktop Grid -->
  <div class="desktop-grid"></div>
  
  <!-- Rain Effect (Hidden Initially) -->
  <div id="rain-container" class="rain-container"></div>
  
  <!-- Desktop Particles -->
  <div id="particle-container"></div>
  
  <!-- Easter Egg Triggers -->
  <div class="easter-egg-trigger" style="top: 10px; left: 10px;"></div>
  <div class="easter-egg-trigger" style="top: 10px; right: 10px;"></div>
  <div class="easter-egg-trigger" style="bottom: 60px; left: 10px;"></div>
  <div class="easter-egg-trigger" style="bottom: 60px; right: 10px;"></div>
  
  <!-- Trash Bin -->
  <div class="trash-bin">
    <img src="https://win98icons.alexmeub.com/icons/png/recycle_bin_empty-1.png" alt="Recycle Bin" id="trash-bin-icon">
    <span>Recycle Bin</span>
  </div>
  
  <!-- Marquee Text -->
  <div class="marquee">
    <p>Welcome to Afnan Baig's Windows 98 Portfolio! • Full Stack Developer • JavaScript Expert • Cloud Specialist • Berlin, Germany • Available for FullTime / PartTime Jobs • Hire me! • +49 157 51342553 • afnanthara11@gmail.com</p>
  </div>

  <!-- Context menu -->
  <div id="context-menu" class="hidden ui-panel absolute z-50 text-base">
    <ul class="p-1" style="font-family: 'Arial', sans-serif">
      <li id="toggle-bg-size-btn" class="px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer">
        Stretch Background
      </li>
      <li id="change-bg-btn" class="px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer">
        Next Background
      </li>
      <li id="rain-effect-btn" class="px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer">
        Toggle Rain Effect
      </li>
      <li id="matrix-effect-btn" class="px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer">
        Matrix Mode
      </li>
      <li id="minimize-all-btn" class="px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer">
        Minimize All Windows
      </li>
    </ul>
  </div>

  <!-- Start menu -->
  <div id="start-menu" class="hidden ui-panel absolute bottom-10 left-0 z-50" style="width: 200px">
    <div class="flex h-full">
      <div class="w-8 bg-[#000080] text-white p-2 flex items-end">
        <div style="writing-mode: vertical-rl; transform: rotate(180deg)" class="text-xl">
          <span class="font-bold italic">Windows</span><span class="font-light">98</span>
        </div>
      </div>
      <ul class="p-1 text-base flex-grow" style="font-family: 'Arial', sans-serif">
        <li class="flex items-center gap-2 px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer" data-modal-target="Projects">
          <img src="https://win98icons.alexmeub.com/icons/png/folder_closed_file-0.png" class="h-4 w-4" alt=""> Programs
        </li>
        <li class="flex items-center gap-2 px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer" data-modal-target="Resume">
          <img src="https://win98icons.alexmeub.com/icons/png/notepad_file-2.png" class="h-4 w-4" alt=""> Documents
        </li>
        <li class="flex items-center gap-2 px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer">
          <img src="https://win98icons.alexmeub.com/icons/png/msn_network-0.png" class="h-4 w-4" alt=""> Settings
        </li>
        <li class="border-t-2 border-gray-500 my-1"></li>
        <li class="px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer" id="find-me-online-btn">
          <img src="https://win98icons.alexmeub.com/icons/png/explorer-4.png" class="h-4 w-4" alt=""> Find Me Online
        </li>
        <li class="border-t-2 border-gray-500 my-1"></li>
        <li class="flex items-center gap-2 px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer" id="run-btn">
          <img src="https://win98icons.alexmeub.com/icons/png/ms_dos-0.png" class="h-4 w-4" alt=""> Run...
        </li>
        <li class="border-t-2 border-gray-500 my-1"></li>
        <li class="flex items-center gap-2 px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer">
          <img src="https://win98icons.alexmeub.com/icons/png/exit-4.png" class="h-4 w-4" alt=""> Log Off
        </li>
        <li class="flex items-center gap-2 px-4 py-1 hover:bg-[#000080] hover:text-white cursor-pointer">
          <img src="https://win98icons.alexmeub.com/icons/png/shut_down-1.png" class="h-4 w-4" alt=""> Shut Down...
        </li>
      </ul>
    </div>
  </div>

  <!-- Desktop icons -->
  <div id="desktop-icons">
    <div class="desktop-icon" data-modal-target="My Computer">
      <img src="https://win98icons.alexmeub.com/icons/png/computer_explorer-4.png" alt="My Computer" class="h-12 w-12 mb-1" onerror="this.style.display='none'" />
      <span>My Computer</span>
    </div>
    <div class="desktop-icon" data-modal-target="Internet">
      <img src="https://win98icons.alexmeub.com/icons/png/msie2-2.png" alt="Internet" class="h-12 w-12 mb-1" onerror="this.style.display='none'" />
      <span>Internet</span>
    </div>
    <div class="desktop-icon" data-modal-target="Projects">
      <img src="https://win98icons.alexmeub.com/icons/png/folder_closed-4.png" alt="Projects" class="h-12 w-12 mb-1" onerror="this.style.display='none'" />
      <span>Projects</span>
    </div>
    <div class="desktop-icon" data-modal-target="Resume">
      <img src="https://win98icons.alexmeub.com/icons/png/notepad_file-2.png" alt="Resume" class="h-12 w-12 mb-1" onerror="this.style.display='none'" />
      <span>Resume</span>
    </div>
    <div class="desktop-icon" id="games-folder">
      <img src="https://files.softicons.com/download/folder-icons/onibari-ultimate-icons-by-stinky9/ico/Games.ico" alt="Games" class="h-12 w-12 mb-1" onerror="this.style.display='none'" />
      <span>Games</span>
    </div>
  </div>

  <!-- Run Dialog -->
  <div id="run-dialog" class="hidden ui-panel absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50" style="width: 300px;">
    <div class="title-bar">
      <span>Run</span>
      <div class="window-controls">
        <div id="run-dialog-close" class="window-control">X</div>
      </div>
    </div>
    <div class="p-4 bg-white" style="border: 2px inset #c0c0c0;">
      <p class="mb-2">Type the name of a program, folder, document, or Internet resource, and Windows will open it for you.</p>
      <div class="mb-4">
        <label for="run-command" class="block mb-1">Open:</label>
        <input type="text" id="run-command" class="w-full ui-panel p-1" style="border: 2px inset #c0c0c0;">
      </div>
      <div class="flex justify-between">
        <button class="retro-button">OK</button>
        <button class="retro-button" id="run-cancel-btn">Cancel</button>
        <button class="retro-button" id="run-browse-btn">Browse...</button>
      </div>
    </div>
  </div>

  <!-- Main center window -->
  <div id="main-window" class="ui-panel w-full max-w-4xl mb-4 z-10">
    <div class="title-bar window-draggable" id="main-window-title">
      <span>afnanbaig.exe - Microsoft Internet Explorer</span>
      <div class="window-controls">
        <div id="minimize-button" class="window-control">_</div>
        <div id="maximize-button" class="window-control">□</div>
        <div id="close-button" class="window-control">X</div>
      </div>
    </div>
    <div class="p-4 sm:p-8 window-content">
      <div class="flex flex-col md:flex-row items-center gap-8">
        <div class="flex flex-col items-center text-center">
          <img src="https://i.gifer.com/7E4l.gif" alt="Spinning Email Icon" class="w-full h-24 mb-4" onerror="this.style.display='none'" />
          <h1 class="text-4xl md:text-5xl font-bold mb-2">Welcome!</h1>
          <p class="text-lg md:w-48 sm:w-full">
            Full Stack Developer with 5+ years of experience building high-performance web applications.
          </p>
        </div>
        <div class="flex-1 w-full">
          <div class="ui-panel p-4" style="border-style: inset">
            <p class="mb-4">
              Hello and welcome to my Windows 98-themed portfolio. I'm Afnan Baig, a Full-stack
              developer with expertise in modern JavaScript frameworks, cloud platforms, and database management.
            </p>
            <p class="mb-4">
              I specialize in implementing RESTful APIs, microservices, and CI/CD pipelines to optimize performance and enhance user engagement.<span class="blinking-text-cursor border-r-4 border-black"></span>
            </p>
            <p id="desktop-warn" class="mb-4">
              Yes, the background is tiled on purpose.
            </p>
            <div class="flex flex-wrap gap-4 justify-center">
              <button class="retro-button" data-modal-target="Projects">
                View My Work
              </button>
              <button class="retro-button" data-modal-target="About Me">
                About Me
              </button>
              <button class="retro-button" data-modal-target="Contact">
                Contact
              </button>
              <button class="retro-button" data-modal-target="Resume">
                Resume
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Taskbar -->
  <div id="taskbar" class="fixed bottom-0 left-0 right-0 h-10 ui-panel z-30 flex items-center justify-between md:px-2 sm:px-0">
    <button id="start-button" class="retro-button text-lg font-bold flex items-center" style="padding: 0 10px; height: 32px">
      <img src="https://win98icons.alexmeub.com/icons/png/windows-0.png" alt="Start" class="h-6 w-6 mr-2" onerror="this.style.display='none'" />
      Start
    </button>
    <div class="h-full border-l-2 border-gray-500 border-r-2 border-white mx-2"></div>
    <!-- Taskbar icons -->
    <div class="flex items-center gap-2">
      <div class="flex items-center gap-2">
        <div class="taskbar-icon" title="My Computer" data-modal-target="My Computer">
          <img src="https://win98icons.alexmeub.com/icons/png/computer-3.png" class="h-8 w-8" alt="My Computer Icon" onerror="this.style.display='none'" />
        </div>
        <div class="taskbar-icon" title="Internet" data-modal-target="Internet">
          <img src="https://win98icons.alexmeub.com/icons/png/briefcase-3.png" class="h-8 w-8" alt="Internet Icon" onerror="this.style.display='none'" />
        </div>
        <div class="taskbar-icon" title="Projects" data-modal-target="Projects">
          <img src="https://win98icons.alexmeub.com/icons/png/folder_closed-4.png" class="h-8 w-8" alt="Projects Icon" onerror="this.style.display='none'" />
        </div>
        <div class="taskbar-icon" title="Resume" data-modal-target="Resume">
          <img src="https://win98icons.alexmeub.com/icons/png/notepad_file-2.png" class="h-8 w-8" alt="Resume Icon" onerror="this.style.display='none'" />
        </div>
      </div>
    </div>
    <!-- Taskbar window buttons -->
    <div id="taskbar-windows" class="flex-grow flex items-center mx-2"></div>
    <!-- Taskbar right - clock and system tray -->
    <div id="system-tray" class="ui-panel p-1 flex items-center gap-2" style="border-style: inset">
      <div id="sound-control" class="taskbar-icon">
        <img src="https://win98icons.alexmeub.com/icons/png/speaker-3.png" class="h-6 w-6" alt="Volume" />
      </div>
      <span id="clock" class="text-sm" style="font-family: 'Arial', sans-serif"></span>
    </div>
  </div>

  <!-- Modal windows -->
  <div id="modal-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4">
    <div id="modal-window" class="ui-panel w-full max-w-lg">
      <div class="title-bar window-draggable" id="modal-window-title">
        <span id="modal-title"></span>
        <div class="window-controls">
          <div class="window-control modal-minimize">_</div>
          <div class="window-control modal-maximize">□</div>
          <div id="modal-close-button" class="window-control">X</div>
        </div>
      </div>
      <div id="modal-content" class="p-4 sm:p-8 bg-white" style="border: 2px inset #c0c0c0; max-height: 60vh; overflow-y: auto"></div>
    </div>
  </div>

  <!-- GIF windows -->
  <div id="gif-window-overlay" class="hidden fixed inset-0 bg-black bg-opacity-25 z-40 flex items-center justify-center p-4">
    <div class="ui-panel w-auto">
      <div class="title-bar">
        <span>A Wild GIF Appears!</span>
        <div class="window-controls">
          <div id="gif-window-close-button" class="window-control">X</div>
        </div>
      </div>
      <div class="p-2 bg-black">
        <img id="gif-image" src="" alt="Random 90s GIF" class="max-w-xs sm:max-w-sm md:max-w-md max-h-[60vh]" />
      </div>
    </div>
  </div>

  <!-- Games Window -->
  <div id="games-window" class="hidden ui-panel absolute top-20 left-20 w-96 z-30">
    <div class="title-bar window-draggable">
      <span>Games</span>
      <div class="window-controls">
        <div class="window-control games-minimize">_</div>
        <div class="window-control games-maximize">□</div>
        <div class="window-control games-close">X</div>
      </div>
    </div>
    <!-- <div class="p-4 bg-white" style="border: 2px inset #c0c0c0; height: 400px; overflow-y: auto;">
      <h2 class="text-2xl font-bold mb-4">Retro Games Collection</h2>
      <div class="grid grid-cols-2 gap-4">
        <div class="ui-panel p-4 text-center cursor-pointer hover:bg-[#000080] hover:text-white" id="snake-game-btn">
          <img src="https://win98icons.alexmeub.com/icons/png/joystick-4.png" class="h-16 w-16 mx-auto mb-2" alt="Snake Game">
          <p>Snake</p>
        </div>
        <div class="ui-panel p-4 text-center cursor-pointer hover:bg-[#000080] hover:text-white" id="minesweeper-game-btn">
          <img src="https://win98icons.alexmeub.com/icons/png/minesweeper-4.png" class="h-16 w-16 mx-auto mb-2" alt="Minesweeper">
          <p>Minesweeper</p>
        </div>
      </div>
    </div> -->
  </div>

  <!-- Snake Game -->
  <div id="snake-game" class="hidden ui-panel absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50">
    <div class="title-bar window-draggable">
      <span>Snake</span>
      <div class="window-controls">
        <div class="window-control snake-close">X</div>
      </div>
    </div>
    <div class="p-4 bg-white" style="border: 2px inset #c0c0c0;">
      <canvas id="snake-canvas" width="400" height="400" class="border-2 border-black"></canvas>
      <div class="mt-4 flex justify-between items-center">
        <div>
          <p>Score: <span id="snake-score">0</span></p>
          <p>High Score: <span id="snake-high-score">0</span></p>
        </div>
        <button id="snake-restart" class="retro-button">Restart</button>
      </div>
    </div>
  </div>

  <!-- Blue screen of death -->
  <div id="bsod" class="hidden fixed inset-0 bg-[#0000AA] text-white p-4 z-50 uppercase text-lg">
    <div class="w-full max-w-4xl mx-auto">
      <p class="bg-white text-[#0000AA] inline-block px-2 mb-8">Windows</p>
      <p class="mb-4">
        A fatal exception 0E has occurred at 0028:C0011E36 in VXD VMM(01) +
        00010E36.
      </p>
      <p class="mb-4">The current application will be terminated.</p>
      <ul class="list-inside list-disc mb-4 pl-4">
        <li>Press any key to terminate the current application.</li>
        <li>
          Press CTRL+ALT+DEL again to restart your computer. You will lose any
          unsaved information in all applications.
        </li>
      </ul>
      <p>
        Press any key to continue <span class="blinking-bsod-cursor">_</span>
      </p>
    </div>
  </div>

  <!-- Loader -->
  <div id="loader" class="fixed inset-0 bg-black z-50 flex flex-col items-center justify-center">
    <div class="w-64 h-4 bg-gray-700 border-2 border-white relative">
      <div id="loading-bar" class="h-full bg-blue-500" style="width: 0"></div>
    </div>
    <p class="text-white text-lg mt-2">Afnan Portfolio is starting up...</p>
    <p class="text-white text-sm mt-2" id="loading-tip">Tip: Right-click for more options</p>
  </div>

  <script>
    // Enhanced JavaScript with all new features
    document.addEventListener("DOMContentLoaded", function () {
      const loader = document.getElementById("loader");
      const loadingBar = document.getElementById("loading-bar");
      const loadingTip = document.getElementById("loading-tip");
      const body = document.querySelector("body");
      const tips = [
        "Tip: Right-click for more options",
        "Tip: Try dragging windows around",
        "Tip: Click the minimize/maximize buttons",
        "Tip: Open the Games folder for some fun",
        "Tip: Try the Matrix mode for a cool effect"
      ];
      
      // Add loading class to body
      body.classList.add("loading");
      
      let progress = 0;
      let tipIndex = 0;
      
      // Rotate tips during loading
      const tipInterval = setInterval(() => {
        tipIndex = (tipIndex + 1) % tips.length;
        loadingTip.textContent = tips[tipIndex];
      }, 3000);
      
      const interval = setInterval(() => {
        progress += Math.random() * 10;
        if (progress > 100) {
          progress = 100;
        }
        loadingBar.style.width = progress + "%";
        
        if (progress === 100) {
          clearInterval(interval);
          clearInterval(tipInterval);
          setTimeout(() => {
            loader.style.display = "none";
            body.classList.remove("loading");
            // Create desktop particles after loading
            createDesktopParticles();
          }, 500);
        }
      }, 200);
    });

    // Create floating particles for desktop
    function createDesktopParticles() {
      const particleContainer = document.getElementById('particle-container');
      const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
      
      for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'desktop-particle';
        
        const size = Math.random() * 5 + 2;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        particle.style.left = `${Math.random() * 100}vw`;
        particle.style.top = `${Math.random() * 100}vh`;
        particle.style.opacity = Math.random() * 0.5 + 0.1;
        
        particleContainer.appendChild(particle);
        
        // Animate particles
        animateParticle(particle);
      }
    }
    
    function animateParticle(particle) {
      const duration = Math.random() * 20 + 10;
      const xMovement = Math.random() * 100 - 50;
      const yMovement = Math.random() * 100 - 50;
      
      particle.animate([
        { transform: 'translate(0, 0)', opacity: particle.style.opacity },
        { transform: `translate(${xMovement}px, ${yMovement}px)`, opacity: 0 }
      ], {
        duration: duration * 1000,
        iterations: Infinity,
        direction: 'alternate',
        easing: 'ease-in-out'
      });
    }

    // --- Start Menu ---
    const startButton = document.getElementById("start-button");
    const startMenu = document.getElementById("start-menu");
    startButton.addEventListener("click", (event) => {
      event.stopPropagation();
      startMenu.classList.toggle("hidden");
    });

    // Modify the existing document click listener to also handle the start menu.
    document.addEventListener("click", (event) => {
      // Hide context menu if the click is outside of it.
      if (!contextMenu.contains(event.target)) {
        contextMenu.classList.add("hidden");
      }
      // Hide start menu if the click is outside of the menu and the start button.
      if (
        !startMenu.classList.contains("hidden") &&
        !startMenu.contains(event.target) &&
        !startButton.contains(event.target)
      ) {
        startMenu.classList.add("hidden");
      }
    });

    // --- Right-Click Context Menu ---
    const backgroundImages = [
      "https://wallpapers.com/images/hd/old-windows-1920-x-1080-background-ngg7bmgpkxrk69lm.jpg",
      "https://assets.codepen.io/1502334/duke.png",
      "https://assets.codepen.io/1502334/lara.png", 
    ];
    let currentBgIndex = 0;
    const contextMenu = document.getElementById("context-menu");
    const toggleBgSizeBtn = document.getElementById("toggle-bg-size-btn");
    const changeBgBtn = document.getElementById("change-bg-btn");
    const rainEffectBtn = document.getElementById("rain-effect-btn");
    const matrixEffectBtn = document.getElementById("matrix-effect-btn");
    const minimizeAllBtn = document.getElementById("minimize-all-btn");
    const body = document.body;

    // Prevent the default browser context menu from appearing.
    document.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      // Position the custom context menu at the cursor's location.
      contextMenu.style.top = `${e.clientY}px`;
      contextMenu.style.left = `${e.clientX}px`;
      contextMenu.classList.remove("hidden");
    });

    // Hide the context menu if the user clicks anywhere else on the page.
    document.addEventListener("click", (e) => {
      if (!contextMenu.contains(e.target)) {
        contextMenu.classList.add("hidden");
      }
    });

    // Handle the "Stretch/Tile Background" option.
    toggleBgSizeBtn.addEventListener("click", () => {
      body.classList.toggle("bg-cover");
      if (body.classList.contains("bg-cover")) {
        toggleBgSizeBtn.textContent = "Tile Background";
      } else {
        toggleBgSizeBtn.textContent = "Stretch Background";
      }
      contextMenu.classList.add("hidden");
    });

    // Handle the "Next Background" option.
    changeBgBtn.addEventListener("click", () => {
      currentBgIndex = (currentBgIndex + 1) % backgroundImages.length;
      body.style.backgroundImage = `url('${backgroundImages[currentBgIndex]}')`;
      contextMenu.classList.add("hidden");
    });

    // Handle the "Rain Effect" option.
    let rainActive = false;
    rainEffectBtn.addEventListener("click", () => {
      rainActive = !rainActive;
      const rainContainer = document.getElementById('rain-container');
      
      if (rainActive) {
        createRainEffect();
        rainContainer.style.display = 'block';
        rainEffectBtn.textContent = "Stop Rain";
      } else {
        rainContainer.innerHTML = '';
        rainContainer.style.display = 'none';
        rainEffectBtn.textContent = "Start Rain";
      }
      contextMenu.classList.add("hidden");
    });

    // Handle the "Matrix Effect" option.
    let matrixActive = false;
    matrixEffectBtn.addEventListener("click", () => {
      matrixActive = !matrixActive;
      const matrixCode = document.getElementById('matrix-code');
      
      if (matrixActive) {
        matrixCode.style.opacity = "1";
        startMatrixEffect();
        matrixEffectBtn.textContent = "Exit Matrix";
      } else {
        matrixCode.style.opacity = "0";
        matrixCode.innerHTML = '';
        matrixEffectBtn.textContent = "Matrix Mode";
      }
      contextMenu.classList.add("hidden");
    });

    // Handle the "Minimize All" option.
    minimizeAllBtn.addEventListener("click", () => {
      const windows = document.querySelectorAll('[id$="-window"], .ui-panel:not(#taskbar):not(#context-menu):not(#start-menu)');
      windows.forEach(window => {
        if (!window.classList.contains('hidden')) {
          window.classList.add('window-minimized');
          // Add to taskbar
          addWindowToTaskbar(window);
        }
      });
      contextMenu.classList.add("hidden");
    });

    // Create rain effect
    function createRainEffect() {
      const rainContainer = document.getElementById('rain-container');
      rainContainer.innerHTML = '';
      
      for (let i = 0; i < 100; i++) {
        const drop = document.createElement('div');
        drop.className = 'rain-drop';
        drop.style.left = `${Math.random() * 100}%`;
        drop.style.animationDuration = `${Math.random() * 1 + 0.5}s`;
        drop.style.animationDelay = `${Math.random() * 2}s`;
        rainContainer.appendChild(drop);
      }
    }

    // Create Matrix code effect
    function startMatrixEffect() {
      const matrixCode = document.getElementById('matrix-code');
      matrixCode.innerHTML = '';
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$#@%&!*';
      
      function createCodeChar() {
        const char = document.createElement('div');
        char.className = 'code-char';
        char.textContent = chars.charAt(Math.floor(Math.random() * chars.length));
        char.style.left = `${Math.random() * 100}%`;
        char.style.fontSize = `${Math.random() * 20 + 10}px`;
        char.style.animationDuration = `${Math.random() * 5 + 3}s`;
        matrixCode.appendChild(char);
        
        setTimeout(() => {
          char.remove();
        }, 8000);
      }
      
      // Create new characters periodically
      setInterval(createCodeChar, 100);
      
      // Create initial characters
      for (let i = 0; i < 50; i++) {
        setTimeout(createCodeChar, i * 100);
      }
    }

    // --- BSOD Functionality ---
    const closeButton = document.getElementById("close-button");
    const bsodScreen = document.getElementById("bsod");
    closeButton.addEventListener("click", () => {
      bsodScreen.classList.remove("hidden");
      document.getElementById('main-window').classList.add('window-shake');
      setTimeout(() => {
        document.getElementById('main-window').classList.remove('window-shake');
      }, 500);
    });

    document.addEventListener("keydown", () => {
      if (!bsodScreen.classList.contains("hidden")) {
        bsodScreen.classList.add("hidden");
      }
    });

    // --- Window Management ---
    // Minimize, maximize, and close functionality
    const minimizeButton = document.getElementById("minimize-button");
    const maximizeButton = document.getElementById("maximize-button");
    const mainWindow = document.getElementById("main-window");

    minimizeButton.addEventListener("click", () => {
      mainWindow.classList.add("window-minimized");
      addWindowToTaskbar(mainWindow);
    });

    maximizeButton.addEventListener("click", () => {
      mainWindow.classList.toggle("window-maximized");
    });

    // Make windows draggable
    let isDragging = false;
    let currentX;
    let currentY;
    let initialX;
    let initialY;
    let xOffset = 0;
    let yOffset = 0;

    const draggableElements = document.querySelectorAll(".window-draggable");
    
    draggableElements.forEach(element => {
      element.addEventListener("mousedown", dragStart);
      element.addEventListener("mouseup", dragEnd);
      element.addEventListener("mousemove", drag);
    });

    function dragStart(e) {
      if (e.button !== 0) return; // Only left click
      
      initialX = e.clientX - xOffset;
      initialY = e.clientY - yOffset;
      
      if (e.target.classList.contains("window-draggable")) {
        isDragging = true;
      }
    }

    function dragEnd(e) {
      if (e.button !== 0) return;
      
      initialX = currentX;
      initialY = currentY;
      
      isDragging = false;
    }

    function drag(e) {
      if (e.button !== 0 || !isDragging) return;
      
      e.preventDefault();
      
      currentX = e.clientX - initialX;
      currentY = e.clientY - initialY;
      
      xOffset = currentX;
      yOffset = currentY;
      
      setTranslate(currentX, currentY, e.target.parentElement);
    }

    function setTranslate(xPos, yPos, el) {
      if (!el.classList.contains("window-maximized")) {
        el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0)`;
      }
    }

    // Taskbar window management
    function addWindowToTaskbar(windowElement) {
      const taskbarWindows = document.getElementById("taskbar-windows");
      const windowId = windowElement.id;
      
      // Check if already in taskbar
      if (document.getElementById(`taskbar-${windowId}`)) return;
      
      const button = document.createElement("div");
      button.id = `taskbar-${windowId}`;
      button.className = 'taskbar-window-button';
      button.textContent = windowElement.querySelector('.title-bar span').textContent;
      
      button.addEventListener("click", () => {
        // Toggle window visibility
        windowElement.classList.toggle("window-minimized");
        
        // Toggle active state
        document.querySelectorAll('.taskbar-window-button').forEach(btn => {
          btn.classList.remove('active');
        });
        
        if (!windowElement.classList.contains("window-minimized")) {
          button.classList.add('active');
        }
      });
      
      taskbarWindows.appendChild(button);
    }

    // --- Reusable Modal Functionality ---
    const modalOverlay = document.getElementById("modal-overlay");
    const modalWindow = document.getElementById("modal-window");
    const modalTitle = document.getElementById("modal-title");
    const modalContent = document.getElementById("modal-content");
    const modalCloseButton = document.getElementById("modal-close-button");

    // Centralized data object for all modal content.
    const modalData = {
      "Projects": {
        title: "Projects.log",
        content: `<h2 class="text-2xl font-bold mb-4">Project Archive</h2>
                     <ul class="list-disc pl-5">
                       <li class="mb-2"><strong>Almaspay.io:</strong> Payment processing platform with secure transaction handling</li>
                       <li class="mb-2"><strong>Luxedesign.ae:</strong> Luxury interior design company website with portfolio showcase</li>
                       <li class="mb-2"><strong>Joinvillesuites.com:</strong> Hotel booking system with real-time availability</li>
                       <li class="mb-2"><strong>Laroussisolution.com:</strong> Business solutions provider with custom web applications</li>
                       <li class="mb-2"><strong>Allsoppandallsopp.com:</strong> Real estate platform with property listings and management</li>
                       <li class="mb-2"><strong>Hogar Properties:</strong> Property management system with lead tracking</li>
                     </ul>
                     <p class="mt-4"><strong>Technologies used:</strong> React, Next.js, Vue.js, Angular, Node.js, PHP, Python, MongoDB, PostgreSQL, AWS, GCP</p>`
      },
      "About Me": {
        title: "README.md",
        content: `<h2 class="text-2xl font-bold mb-4">About Afnan Baig</h2>
                     <p class="mb-4">A results-driven Full Stack Developer with over 5 years of experience in building high-performance, scalable web applications. Expertise in modern JavaScript frameworks (React, Next.js, Vue.js, Angular, Node.js, PHP), cloud platforms (AWS, GCP, Azure), and database management (MongoDB, PostgreSQL, MySQL).</p>
                     <p class="mb-4">Skilled in implementing RESTful APIs, micro services, and CI/CD pipelines to optimize performance, reduce load times by up to 80%, and enhance user engagement. Proficient in Agile methodologies, clean architecture, and cross-functional collaboration to deliver robust, user-centric solutions.</p>
                     <p>My philosophy is to build things that are robust, efficient, and human-centered. In an industry chasing fleeting trends and bloated frameworks, I find satisfaction in clean architecture and well-documented code. I'm not just a developer; I'm a craftsman dedicated to building digital experiences that are meaningful, accessible, and built to last.</p>`
      },
      Contact: {
        title: "contact.info",
        content: `<h2 class="text-2xl font-bold mb-4">Establish Comms</h2>
                     <p>You can reach me through the following channels:</p>
                     <ul class="list-disc pl-5 mt-2">
                       <li><strong>Location:</strong> Ostseestraße, Berlin, Germany</li>
                       <li><strong>Phone:</strong> +49 157 51342553</li>
                       <li><strong>Email:</strong> afnanthara11@gmail.com</li>
                       <li><strong>LinkedIn:</strong> linkedin.com/in/afnan-baig</li>
                       <li><strong>GitHub:</strong> github.com/afnan111</li>
                     </ul>`
      },
      "My Computer": {
        title: "C:/",
        content: `<h2 class="text-2xl font-bold mb-4">Directory Listing for C:/</h2>
                     <ul class="list-disc pl-5 mt-2 font-mono">
                       <li>/SYS/</li>
                       <li>/DEV/FRONTEND/</li>
                       <li>/DEV/BACKEND/</li>
                       <li>/DEV/DATABASES/</li>
                       <li>/DEV/CLOUD/</li>
                       <li>/PROJECTS/</li>
                       <li>RESUME.pdf</li>
                     </ul>`
      },
      Resume: {
        title: "RESUME.pdf",
        content: `<h2 class="text-2xl font-bold mb-4">AFNAN BAIG</h2>
                     <p class="mb-2"><strong>Full Stack Developer | Web Application Developer</strong></p>
                     <p class="mb-4">Ostseestraße, Berlin, Germany</p>
                     
                     <h3 class="text-xl font-bold mb-2 mt-4">TECHNICAL SKILLS</h3>
                     <ul class="list-disc pl-5 mb-4">
                       <li><strong>Languages:</strong> JavaScript, TypeScript, PHP, Python, GraphQL</li>
                       <li><strong>Frontend:</strong> React, Next.js, Vue.js, Angular, React Native, TailwindCSS</li>
                       <li><strong>Backend:</strong> Node.js, Express, Strapi, REST APIs, Microservices, OOP</li>
                       <li><strong>Databases:</strong> MongoDB, PostgreSQL, MySQL, Firebase, Cloud Firestore, SQLite</li>
                       <li><strong>Cloud & DevOps:</strong> AWS, GCP, Azure, Docker, Kubernetes, Jenkins, GitHub Actions, Terraform, Nginx</li>
                     </ul>
                     
                     <h3 class="text-xl font-bold mb-2 mt-4">WORK EXPERIENCE</h3>
                     <p class="mb-2"><strong>Senior Full Stack Developer</strong> | Jan 2024 - Jun 2025 | Hogar Properties</p>
                     <ul class="list-disc pl-5 mb-4">
                       <li>Architected and developed a full-stack lead management system using React and Node.js</li>
                       <li>Spearheaded migration from PHP legacy system to MERN stack</li>
                       <li>Delivered 10+ client projects using various technologies</li>
                     </ul>
                     
                     <p class="mb-2"><strong>Senior Full Stack Developer</strong> | July 2023 - Dec 2023 | Allsopp & Allsopp Group</p>
                     <ul class="list-disc pl-5 mb-4">
                       <li>Designed and deployed microservices architecture decreasing page load times by 80%</li>
                       <li>Developed comprehensive admin dashboard with real-time analytics</li>
                     </ul>

                     <p class="mb-2"><strong>Full Stack Developer</strong> | March 2023 - July 2024 | HBL Mfb Bank</p>
                     <ul class="list-disc pl-5 mb-4">
                       <li>Implemented scalable microservices reducing server response time by 70%</li>
                       <li>Built interactive admin dashboard with live performance monitoring</li>
                     </ul>

                     <p class="mb-2"><strong>Full Stack Developer</strong> | Jan 2020 - Feb 2022 |Webzela Tech</p>
                     <ul class="list-disc pl-5 mb-4">
                       <li>Engineered microservices infrastructure improving system efficiency and reliability</li>
                       <li>Created dynamic admin dashboard providing actionable insights in real-time</li>
                     </ul>
                     
                     <p class="text-sm mt-6">For complete resume details, please contact me directly.</p>`
      },
      Internet: {
        title: "Establishing Connection...",
        content: ``
      }
    };

    const openInternetExplorer = () => {
      const data = modalData["Internet"];
      if (data) {
        modalTitle.textContent = data.title;
        modalContent.innerHTML = data.content;
        // Make the modal look unresponsive
        modalWindow.classList.add("frozen");
        modalContent.style.backgroundColor = "white";
        modalOverlay.classList.remove("hidden");
        setTimeout(() => {
          // After 5 seconds, show crash message
          modalTitle.textContent = "Internet Explorer";
          modalContent.innerHTML = `<div class="flex items-center flex-col"><div class="flex mb-8"><img src="https://win98icons.alexmeub.com/icons/png/msg_error-0.png" class="h-8 w-8 mr-4"><p>This program has performed an illegal operation and will be shut down.</p></div></div>`;
          modalWindow.classList.remove("frozen");
        }, 5000);
      }
    };

    // This function opens the modal and populates it with the correct data.
    const openModal = (targetKey) => {
      if (targetKey === "Internet") {
        openInternetExplorer();
        return;
      }
      const data = modalData[targetKey];
      if (data) {
        modalTitle.textContent = data.title;
        modalContent.innerHTML = data.content;
        modalContent.style.backgroundColor = "white";
        modalOverlay.classList.remove("hidden");
        addWindowToTaskbar(modalWindow);
      }
    };

    // Select ALL elements that should trigger a modal and loop through them.
    const modalTriggers = document.querySelectorAll("[data-modal-target]");
    modalTriggers.forEach((trigger) => {
      trigger.addEventListener("click", () => {
        const targetKey = trigger.dataset.modalTarget;
        openModal(targetKey);
      });
    });

    const closeModal = () => {
      modalOverlay.classList.add("hidden");
      // Remove from taskbar
      const taskbarButton = document.getElementById(`taskbar-${modalWindow.id}`);
      if (taskbarButton) {
        taskbarButton.remove();
      }
    };
    
    modalCloseButton.addEventListener("click", closeModal);
    modalOverlay.addEventListener("click", (event) => {
      if (event.target === modalOverlay) closeModal();
    });

    // --- Games Functionality ---
    const gamesFolder = document.getElementById("games-folder");
    const gamesWindow = document.getElementById("games-window");
    const snakeGameBtn = document.getElementById("snake-game-btn");
    const snakeGame = document.getElementById("snake-game");
    const snakeCloseBtn = snakeGame.querySelector(".snake-close");
    const gamesCloseBtn = gamesWindow.querySelector(".games-close");
    const gamesMinimizeBtn = gamesWindow.querySelector(".games-minimize");
    const gamesMaximizeBtn = gamesWindow.querySelector(".games-maximize");

    gamesFolder.addEventListener("click", () => {
      gamesWindow.classList.remove("hidden");
      addWindowToTaskbar(gamesWindow);
    });

    snakeGameBtn.addEventListener("click", () => {
      snakeGame.classList.remove("hidden");
      gamesWindow.classList.add("hidden");
      initSnakeGame();
      addWindowToTaskbar(snakeGame);
    });

    snakeCloseBtn.addEventListener("click", () => {
      snakeGame.classList.add("hidden");
    });

    gamesCloseBtn.addEventListener("click", () => {
      gamesWindow.classList.add("hidden");
    });

    gamesMinimizeBtn.addEventListener("click", () => {
      gamesWindow.classList.add("window-minimized");
      addWindowToTaskbar(gamesWindow);
    });

    gamesMaximizeBtn.addEventListener("click", () => {
      gamesWindow.classList.toggle("window-maximized");
    });

    // Snake Game Implementation
    function initSnakeGame() {
      const canvas = document.getElementById("snake-canvas");
      const ctx = canvas.getContext("2d");
      const snakeScore = document.getElementById("snake-score");
      const snakeHighScore = document.getElementById("snake-high-score");
      const snakeRestart = document.getElementById("snake-restart");
      
      const gridSize = 20;
      const gridWidth = canvas.width / gridSize;
      const gridHeight = canvas.height / gridSize;
      
      let snake = [];
      let food = {};
      let direction = 'right';
      let gameInterval;
      let score = 0;
      let highScore = localStorage.getItem('snakeHighScore') || 0;
      
      snakeHighScore.textContent = highScore;
      
      function initGame() {
        snake = [{x: 10, y: 10}];
        generateFood();
        score = 0;
        snakeScore.textContent = score;
        direction = 'right';
        
        if (gameInterval) clearInterval(gameInterval);
        gameInterval = setInterval(gameLoop, 150);
      }
      
      function generateFood() {
        food = {
          x: Math.floor(Math.random() * gridWidth),
          y: Math.floor(Math.random() * gridHeight)
        };
        
        // Make sure food doesn't appear on snake
        for (let i = 0; i < snake.length; i++) {
          if (snake[i].x === food.x && snake[i].y === food.y) {
            return generateFood();
          }
        }
      }
      
      function gameLoop() {
        moveSnake();
        
        if (checkCollision()) {
          clearInterval(gameInterval);
          alert('Game Over! Your score: ' + score);
          return;
        }
        
        if (snake[0].x === food.x && snake[0].y === food.y) {
          score++;
          snakeScore.textContent = score;
          
          if (score > highScore) {
            highScore = score;
            snakeHighScore.textContent = highScore;
            localStorage.setItem('snakeHighScore', highScore);
          }
          
          generateFood();
        } else {
          snake.pop();
        }
        
        draw();
      }
      
      function moveSnake() {
        const head = {x: snake[0].x, y: snake[0].y};
        
        switch (direction) {
          case 'up': head.y--; break;
          case 'down': head.y++; break;
          case 'left': head.x--; break;
          case 'right': head.x++; break;
        }
        
        snake.unshift(head);
      }
      
      function checkCollision() {
        const head = snake[0];
        
        // Wall collision
        if (head.x < 0 || head.x >= gridWidth || head.y < 0 || head.y >= gridHeight) {
          return true;
        }
        
        // Self collision
        for (let i = 1; i < snake.length; i++) {
          if (head.x === snake[i].x && head.y === snake[i].y) {
            return true;
          }
        }
        
        return false;
      }
      
      function draw() {
        // Clear canvas
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // Draw snake
        ctx.fillStyle = 'green';
        for (let i = 0; i < snake.length; i++) {
          ctx.fillRect(snake[i].x * gridSize, snake[i].y * gridSize, gridSize - 1, gridSize - 1);
        }
        
        // Draw food
        ctx.fillStyle = 'red';
        ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize - 1, gridSize - 1);
      }
      
      // Control the snake with keyboard
      document.addEventListener('keydown', (e) => {
        switch (e.key) {
          case 'ArrowUp':
            if (direction !== 'down') direction = 'up';
            break;
          case 'ArrowDown':
            if (direction !== 'up') direction = 'down';
            break;
          case 'ArrowLeft':
            if (direction !== 'right') direction = 'left';
            break;
          case 'ArrowRight':
            if (direction !== 'left') direction = 'right';
            break;
        }
      });
      
      snakeRestart.addEventListener('click', initGame);
      
      // Initialize the game
      initGame();
    }

    // --- Run Dialog ---
    const runBtn = document.getElementById("run-btn");
    const runDialog = document.getElementById("run-dialog");
    const runDialogClose = document.getElementById("run-dialog-close");
    const runCancelBtn = document.getElementById("run-cancel-btn");
    
    runBtn.addEventListener("click", () => {
      runDialog.classList.remove("hidden");
    });
    
    runDialogClose.addEventListener("click", () => {
      runDialog.classList.add("hidden");
    });
    
    runCancelBtn.addEventListener("click", () => {
      runDialog.classList.add("hidden");
    });

    // --- GIF Window Functionality ---
    const gifUrls = [
      "https://i.gifer.com/EfEa.gif",
      "https://i.gifer.com/6VDN.gif",
      "https://i.gifer.com/KbSB.gif",
      "https://i.gifer.com/K1J7.gif",
      "https://i.gifer.com/1Xs.gif",
      "https://i.gifer.com/2Nli.gif",
      "https://i.gifer.com/3Fjh.gif",
    ];
    const gifTriggerIcons = document.querySelectorAll(".taskbar-icon");
    const gifWindowOverlay = document.getElementById("gif-window-overlay");
    const gifImage = document.getElementById("gif-image");
    const gifWindowCloseButton = document.getElementById("gif-window-close-button");
    const openGifWindow = () => {
      const randomIndex = Math.floor(Math.random() * gifUrls.length);
      gifImage.src = gifUrls[randomIndex];
      gifWindowOverlay.classList.remove("hidden");
    };
    const closeGifWindow = () => {
      gifWindowOverlay.classList.add("hidden");
      gifImage.src = ""; // Clear src to stop the animation
    };
    gifTriggerIcons.forEach((icon) =>
      icon.addEventListener("click", openGifWindow)
    );
    gifWindowCloseButton.addEventListener("click", closeGifWindow);
    gifWindowOverlay.addEventListener("click", (event) => {
      if (event.target === gifWindowOverlay) closeGifWindow();
    });

    // --- Clock Functionality ---
    const clockElement = document.getElementById("clock");
    const updateClock = () => {
      const now = new Date();
      let hours = now.getHours();
      const minutes = now.getMinutes().toString().padStart(2, "0");
      const ampm = hours >= 12 ? "PM" : "AM";
      hours = hours % 12;
      hours = hours ? hours : 12;
      clockElement.textContent = `${hours}:${minutes} ${ampm}`;
    };
    updateClock();
    setInterval(updateClock, 1000);

    // Easter egg functionality
    const easterEggTriggers = document.querySelectorAll('.easter-egg-trigger');
    easterEggTriggers.forEach(trigger => {
      trigger.addEventListener('click', () => {
        // Random easter egg effect
        const effects = [
          () => { document.body.style.filter = 'hue-rotate(180deg)'; setTimeout(() => { document.body.style.filter = ''; }, 2000); },
          () => { document.querySelectorAll('*').forEach(el => { el.style.transform = 'rotate(180deg)'; }); setTimeout(() => { document.querySelectorAll('*').forEach(el => { el.style.transform = ''; }); }, 1000); },
          () => { document.body.style.animation = 'shake 0.5s'; setTimeout(() => { document.body.style.animation = ''; }, 500); },
          () => { 
            const oldBg = document.body.style.backgroundImage;
            document.body.style.backgroundImage = 'url(https://i.gifer.com/7E4l.gif)';
            setTimeout(() => { document.body.style.backgroundImage = oldBg; }, 2000);
          }
        ];
        
        const randomEffect = effects[Math.floor(Math.random() * effects.length)];
        randomEffect();
      });
    });
  </script>
</body>
</html>